<template>
	<section class="section__body contact">
		<div class="form-wrapper">
			<form method="post">
				<h2 class="section__header">Reach out!</h2>
				<div class="name-email">
					<div class="input-container">
						<label for="name" class="form-label">Your name</label>
						<input id="name" name="name" class="form-field" type="text" />
					</div>
					<div class="input-container">
						<label for="email" class="form-label">Your email</label>
						<input id="email" name="email" class="form-field" type="text" />
					</div>
				</div>
				<div class="input-container">
					<label for="message" class="form-label">Your message to me</label>
					<textarea id="message" name="message" class="form-field" rows="3"></textarea>
					<input id="submit-btn" type="submit" value="Submit" />
				</div>
			</form>
			<div class="thank-you">
				<h3 class="section__header">Thanks for your message.</h3>
				<!-- <p class="section__body">I promise, I'll respond to you when I can. Looking forward to talking!</p> -->
				<svg class="headline-tag" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 795.38 71.21">
					<g id="ct">
						<path
							class="cls-1"
							d="M13.17,22.75c-.94,10.72-7.15,23.41-7,31.59a6.07,6.07,0,0,1,0,2.25,2.21,2.21,0,0,1-2.26,1.89c-1.13,0-2.54-.85-3.29-3.2-2.63-8.84,4.7-25.67,4.7-36.48C7.72,18.05,13.45,19.74,13.17,22.75Z"
						/>
						<path
							class="cls-1"
							d="M22.1,0a2.67,2.67,0,0,1,2.82,2.63c0,2.54-4.32,9.69-7.14,9.69-1,0-.66-.94.09-2a19.89,19.89,0,0,0,1.69-3.48c-1.22.1-2.26-.09-2.82-.94C15.05,3.1,18.9,0,22.1,0Z"
						/>
						<path
							class="cls-1"
							d="M30.47,60.73c-5.64,0-9.4-8.55-7.24-14C26.8,37.79,30.65,28.58,35,19.93c3.2,0,5.92,3.2,4.89,5.64-3.48,8-12.32,25-10.25,30,3.76,0,11.56-4.42,14.57-7.14.94-.94,1.22-.94,1.6-.57C49.74,55.47,35.64,60.73,30.47,60.73Z"
						/>
						<path
							class="cls-1"
							d="M57.26,60.73c-5.64,0-9.4-8.55-7.24-14,3.57-8.93,7.43-18.14,11.75-26.79,3.2,0,5.92,3.2,4.89,5.64-3.48,8-12.32,25-10.25,30,3.76,0,11.57-4.42,14.57-7.14.94-.94,1.23-.94,1.6-.57C76.53,55.47,62.43,60.73,57.26,60.73Z"
						/>
						<path
							class="cls-1"
							d="M112.54,16.74c5.45-1.79,11.09,2.34,9.21,8.17C120.9,27.36,116,35.35,114.23,37c4.23-1.13,10.06-1.79,13.63,2.63,2.07,2.54,2.54,5.46.94,8.28-2.82,5.26-12.41,12.87-18.8,18-3.57,2.92-10.25,6.39-13.92,5,.19-.94,1.79-2.35,3.58-3.76,7.61-6,18.71-15.32,23.12-22.75.66-1,.85-2.16-.75-2.35-4.89-.66-13.72,1-17.2,4.52-.75,1-1.88,8-2.54,9.68s-.56,2.26-1.88,2.26c-2.26,0-5-1-4.89-3.67.09-5.83,2.63-20.4,3.76-29.9.19-1.41.85-2,3.86-1.69C104.45,21.25,109.62,17.77,112.54,16.74ZM115,23.5c-5.55-.28-8.93,8.28-9.31,12.7C109.81,36.2,115,25.85,115,23.5Z"
						/>
						<path
							class="cls-1"
							d="M165.09,20.12c.37,1.79.19,3.29-2.26,3.57-1.41.19-3.19.47-4.23.66-9,1.79-10.53,4-13.07,11.19,2.17-.38,12.13-3.67,13-.85.65,2.07-1.79,1.79-6.4,3.48l-8,2.26c-2.06,5.17-3.57,15.32-1.88,18.52,3.39,0,12.32-7.06,16.64-11.66,3-3.1,4.52-3.2,2.82,1.31-3,7.62-13.35,15.14-18.89,15.14a9.45,9.45,0,0,1-5.92-2.63c-4.52-4-3.86-12.13-2.45-18.33-3.29.65-4.14-2.64-3.29-4.42,1.41-.29,3.29-.66,4.7-.85a103.33,103.33,0,0,1,3.67-10c-2.92.47-2.63-2.26-1.32-4.8C142.71,21.81,157.94,19.08,165.09,20.12Z"
						/>
						<path
							class="cls-1"
							d="M190.19,23.13c.47-2,1-4.7,3.57-4.23,3.86.84,5.27,2.16,3,9l-2.63,7.52a190.84,190.84,0,0,0-5.46,19.93,5.35,5.35,0,0,1-4.32,3.39C177.59,58.76,188.78,29.9,190.19,23.13Z"
						/>
						<path
							class="cls-1"
							d="M230.61,20.78c2.73,0,3.57,2.25,3.48,5.17-.38,8-8.65,33.09-17.86,33.09-8.84,0-8.18-18-8.09-23.5C206.36,39,202,52.65,201.28,55.28c-.37,1-.28,3.2-1.88,3.2-4,0-4.7-3.48-4-6.77s6.3-20.59,7.71-23.6c1.41-3.2,3.29-3.29,4.6-3.29,0-1,4.42-4.42,6.49-3.2,3.57,2.17,3.29,2.92,2.63,5.46-2.35,8.64-2.91,19.83-.94,25.94C220.08,52.27,229.3,26.51,230.61,20.78Z"
						/>
						<path
							class="cls-1"
							d="M254.4,25.48c0-.47.28-.38.65-.38a10.57,10.57,0,0,0,3-.28c7-1.41,16.64-3.57,22.28-4.61,1.7-.28,2.35-.09,2.17,2.54-.85,3.29-5.64,3.67-8.56,4.42-2,10.06-3.2,18-5.36,26.7-1.41,5.64-1.88,7.43-4.89,7.43s-2.63-1.13-1.5-7.34c1.5-8.36,3.1-16.64,4.23-25.1C260.51,29.71,254.58,30.65,254.4,25.48Z"
						/>
						<path
							class="cls-1"
							d="M288.05,23.5c.75-.94,4.8-2.25,8.74-2.25,16.83,0,12.23,37.7-8.55,37.7A10.52,10.52,0,0,1,279,53.59c-3.95-7.43,3.57-21.16,9.21-26.33C288.24,26,287.11,24.82,288.05,23.5Zm-3.57,27.83a1.9,1.9,0,0,0,2,1.69c11.19,0,16.74-16,12-25C293,28,282.88,45.22,284.48,51.33Z"
						/>
						<path
							class="cls-1"
							d="M318,58.48c-15.42,0-6-26.23-3.67-33.47,2.54,0,5.92,1.31,6,3.76a14.79,14.79,0,0,1-1,4.6c-1.31,4.61-5.07,16.36-1.78,20.5,6.39,0,12.88-15.89,14.66-21.44.47-1.69,1-3.57,2.54-3.57s5,1.22,4.7,2.26c-2.63,10.06-4.13,19.55-3,30.18.19,3.76-4.42,4.7-5.83,1a27.94,27.94,0,0,1-1.12-5.45,32.29,32.29,0,0,1-.19-5.17C326.41,55.75,322.74,58.48,318,58.48Z"
						/>
						<path
							class="cls-1"
							d="M370.78,44.19c-3.66,7.7-13.63,14.29-20,14.29-6.77,0-13-5-10.72-13.82,2.44-9.59,11.47-24,22.47-24.07,1.88,0,4.14,1.22,4.14,4.7-9.59,2.16-16.17,9.59-19.09,19-1.13,3.95-1.22,7.24.1,9.12,9.3,0,17.58-7.24,23.12-14.76C371.82,40.24,372.1,41.55,370.78,44.19Z"
						/>
						<path
							class="cls-1"
							d="M399.64,32.43c.28-1.41,4.61-16.82,7.81-16.73,2.91.09,5.26,1.79,5.26,4.7a3.63,3.63,0,0,1-.56,1.41c-4.7,7.71-6.59,19.93-6.3,28.49.09,3,2.82,8.18.56,8.18-9.4-2.82-8.84-11.19-8.08-19.09-2.17,0-14.29,4.23-15.42,6.11C381.4,48,381.5,56.12,381.4,59c-.09,4.32-5.07,2.06-5.82.46-2.54-5.45.56-25.1,1.41-32,.37-3.2,7.8-5.45,7.8-2.82,0,5.54-1.51,10.81-1.79,13.82C386.58,37.13,398.23,33.56,399.64,32.43Z"
						/>
						<path
							class="cls-1"
							d="M438.19,51.8a2.24,2.24,0,0,0-.38-2.44c-5-6-9.87-11-5.08-19.84,2.26-3.95,7-7.24,11.57-9,2.91-1,5.64.29,7.05,4.05-4.89,1.31-11.19,3.66-14.29,9.3-2.16,3.77,1.6,8.09,4,11,4.7,5.64,3.29,8.84,1.32,10.82-3,3-13.35,7.61-16.08,2.34C429.63,57.25,436.12,55.47,438.19,51.8Z"
						/>
						<path
							class="cls-1"
							d="M459.15,23.5c.75-.94,4.8-2.25,8.74-2.25,16.83,0,12.22,37.7-8.55,37.7a10.51,10.51,0,0,1-9.21-5.36c-3.95-7.43,3.57-21.16,9.21-26.33C459.34,26,458.21,24.82,459.15,23.5Zm-3.57,27.83a1.9,1.9,0,0,0,2,1.69c11.19,0,16.74-16,12-25C464.13,28,454,45.22,455.58,51.33Z"
						/>
						<path
							class="cls-1"
							d="M490.27,23.5c.75-.94,4.79-2.25,8.74-2.25,16.83,0,12.22,37.7-8.55,37.7a10.53,10.53,0,0,1-9.22-5.36c-3.95-7.43,3.58-21.16,9.22-26.33C490.46,26,489.33,24.82,490.27,23.5ZM486.7,51.33a1.9,1.9,0,0,0,2,1.69c11.19,0,16.73-16,12-25C495.25,28,485.1,45.22,486.7,51.33Z"
						/>
						<path
							class="cls-1"
							d="M545.08,20.78c2.72,0,3.57,2.25,3.47,5.17-.37,8-8.64,33.09-17.86,33.09-8.83,0-8.18-18-8.08-23.5-1.79,3.48-6.11,17.11-6.86,19.74-.38,1-.29,3.2-1.88,3.2-3.95,0-4.7-3.48-4.05-6.77s6.3-20.59,7.71-23.6c1.41-3.2,3.29-3.29,4.61-3.29,0-1,4.42-4.42,6.49-3.2,3.57,2.17,3.29,2.92,2.63,5.46-2.35,8.64-2.92,19.83-.94,25.94C534.55,52.27,543.76,26.51,545.08,20.78Z"
						/>
						<path
							class="cls-1"
							d="M553.07,54.34A2.67,2.67,0,0,1,555.89,57c0,2.54-4.33,9.68-7.15,9.68-.94,0-.65-.94.1-2a24.17,24.17,0,0,0,1.69-3.48c-1.22.1-2.26-.09-2.82-.94C546,57.44,549.87,54.34,553.07,54.34Z"
						/>
						<path
							class="cls-1"
							d="M607.78,14.76c8.37,2.82,8.18,11.09,3.2,18.71a33.41,33.41,0,0,1-16.74,13.16c-1,.28-1.41.75-1.78,2.16a86.92,86.92,0,0,0-1.69,8.56c-.29,1.22-.57,1.88-2,1.88-4.7,0-3.48-5.27-2.73-10.44.38-2-1.69-2.35-1.69-3.85,0-2.07,2.73-1.88,3.29-3.86.85-3.19,2-9.4,1.32-13.06-1.22,1.5-3.29,4.79-4.61,4.79s-3.66-1.41-4-2.63C586.72,19.46,597.63,11.38,607.78,14.76Zm.94,7.52c0-2.91-2.35-3.67-4.79-3.67-5.08,0-9.5,3.11-12.51,6.77,2.45,0,5,3,5,4.33,0,2.72-3.2,10.62-2.35,10.62C600.35,40.33,608.72,28.67,608.72,22.28Z"
						/>
						<path
							class="cls-1"
							d="M620.47,31c3.11-4.6,6.87-9.58,12.69-10.62,4.61-.75,9.22,3.39,7.06,8.09-2.54,5.26-12.88,13.44-19.28,15.79,1.32,1,15.33,4.14,17,3.95,2.35-.38,2.91-.38,3.2.94a2.36,2.36,0,0,1-1.42,2.91c-5.82,1.6-15.22-1.31-20.68-2.82a52.82,52.82,0,0,0-1.41,7c-.19,1.69,0,3.48-2.25,3.48-2.64,0-3.2-2.82-2.82-7,.47-6,2.06-12.5,3.47-18.43C616.9,30.65,619.16,30.84,620.47,31Zm15.23-5.45c-5.26-.75-13.06,8.93-14.47,13.45C625.08,37.61,635.23,29.52,635.7,25.57Z"
						/>
						<path
							class="cls-1"
							d="M654.69,23.5c.75-.94,4.8-2.25,8.75-2.25,16.82,0,12.22,37.7-8.56,37.7a10.52,10.52,0,0,1-9.21-5.36c-3.95-7.43,3.57-21.16,9.21-26.33C654.88,26,653.75,24.82,654.69,23.5Zm-3.57,27.83a1.9,1.9,0,0,0,2,1.69c11.19,0,16.74-16,12-25C659.68,28,649.52,45.22,651.12,51.33Z"
						/>
						<path
							class="cls-1"
							d="M715.24,20.68c5.64-1.88,7.14,3.11,5.92,7.71-2.16,8-6.77,20.31-8.74,28.39-.38,1.32-.57,2.82-2.45,2.82-6.2,0,1.22-21.06,2.16-25.47-2.82.94-11.84,13.53-16.45,17.95-3.95,3.86-6.11,3.1-7.8-1.78a81,81,0,0,1-2.16-8.46l-5.46,13.44c-1.59,3.2-2.16,3.1-3.1,3.1-2.54,0-3.66-1.79-3.66-4.14,0-4.88,6.67-15.13,7.71-23.22.28-2.06.56-3.76,2.72-3.76,5.64,0,8.09,15.89,9.4,20.31C696.43,43.81,711,22.09,715.24,20.68Z"
						/>
						<path
							class="cls-1"
							d="M727.93,23.13c.47-2,1-4.7,3.57-4.23,3.86.84,5.27,2.16,3,9l-2.63,7.52a190.84,190.84,0,0,0-5.46,19.93,5.35,5.35,0,0,1-4.32,3.39C715.33,58.76,726.52,29.9,727.93,23.13Z"
						/>
						<path
							class="cls-1"
							d="M743.72,51.8a2.23,2.23,0,0,0-.37-2.44c-5-6-9.88-11-5.08-19.84,2.26-3.95,7-7.24,11.56-9,2.92-1,5.64.29,7,4.05-4.89,1.31-11.18,3.66-14.29,9.3-2.16,3.77,1.6,8.09,4,11,4.7,5.64,3.29,8.84,1.31,10.82-3,3-13.35,7.61-16.07,2.34C735.17,57.25,741.65,55.47,743.72,51.8Z"
						/>
						<path
							class="cls-1"
							d="M787.91,20.12c.37,1.79.18,3.29-2.26,3.57-1.41.19-3.2.47-4.23.66-9,1.79-10.53,4-13.07,11.19,2.16-.38,12.13-3.67,13-.85.65,2.07-1.79,1.79-6.4,3.48l-8,2.26c-2.07,5.17-3.57,15.32-1.88,18.52,3.39,0,12.32-7.06,16.64-11.66,3-3.1,4.51-3.2,2.82,1.31-3,7.62-13.35,15.14-18.89,15.14a9.47,9.47,0,0,1-5.93-2.63c-4.51-4-3.85-12.13-2.44-18.33-3.29.65-4.14-2.64-3.29-4.42,1.41-.29,3.29-.66,4.7-.85a100.73,100.73,0,0,1,3.67-10c-2.92.47-2.64-2.26-1.32-4.8C765.53,21.81,780.76,19.08,787.91,20.12Z"
						/>
						<path class="cls-1" d="M794.86,55.47c1.41,1.88-.37,3.57-1.5,4.42-1.6,1.31-5.17,2.06-6.21.37C784.9,56.5,792.61,52.27,794.86,55.47Z" />
					</g>
				</svg>
			</div>
		</div>
	</section>
</template>

<script>
export default {
	name: 'Contact',
	mounted: function () {
		const inputFields = document.querySelectorAll('.form-field');

		inputFields.forEach(function (field, _, array) {
			field.addEventListener('focusin', function (e) {
				const label = e.target.previousElementSibling;
				label.classList.add('form-label__focus');
			});

			field.addEventListener('focusout', function (e) {
				const label = e.target.previousElementSibling;
				if (e.target.value === '') {
					label.classList.remove('form-label__focus');
				}
			});

			field.addEventListener('keyup', function () {
				const parent = field.closest('.input-container');
				if (parent.classList.contains('error')) {
					parent.classList.remove('error');
				}

				if (array[0].value !== '' && array[1].value !== '' && array[2].value !== '') {
					document.getElementById('submit-btn').style.opacity = '1';
					document.getElementById('submit-btn').style.cursor = 'pointer';
				} else {
					document.getElementById('submit-btn').style.opacity = '0.4';
					document.getElementById('submit-btn').style.cursor = 'default';
				}
			});
		});

		let postData = async (url = '', data = {}) => {
			const response = await fetch(url, {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json',
				},
				body: JSON.stringify(data),
			});
			return response.json();
		};

		document.querySelector('input#submit-btn').addEventListener('click', function (e) {
			e.preventDefault();

			const data = {
				name: document.querySelector('input#name').value,
				email: document.querySelector('input#email').value,
				message: document.querySelector('textarea#message').value,
			};

			if (data.name && data.email && data.message) {
				postData('/submit', data)
					.then(() => {
						document.querySelector('form').classList.add('mail-sent');
						setTimeout(() => {
							document.querySelector('form').style.display = '';
							document.querySelector('.thank-you').classList.add('thank-you_visible');
						}, 500);
					})
					.catch(() => {
						document.querySelector('form').classList.add('mail-sent');
						document.querySelector('form').style.display = '';
						document.querySelector('.thank-you').classList.add('thank-you_visible');
					});
			} else {
				for (let item in data) {
					if (!data[item]) {
						document.getElementById(item).closest('.input-container').classList.add('error');
					}
				}
			}
		});
	},
};
</script>
